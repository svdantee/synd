{% extends "base.html" %}

{% block title %}评分模板 - 文档评审系统{% endblock %}

{% block content %}
<div class="page-header">
    <h1>评分模板</h1>
    <a href="{{ url_for('admin_templates_create') }}" class="btn btn-primary">新建模板</a>
</div>

<div class="section">
    <h2>模板列表</h2>
    {% if templates %}
    <div class="table-container">
        <table class="data-table">
            <thead>
            <tr>
                <th>名称</th>
                <th>描述</th>
                <th>维度数量</th>
                <th>创建时间</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            {% for t in templates %}
            <tr>
                <td><strong>{{ t.name }}</strong></td>
                <td>{{ t.description or '-' }}</td>
                <td>{{ t._dimension_count }} 个</td>
                <td>{{ t.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>
                    <a class="btn btn-sm btn-primary" href="{{ url_for('admin_template_edit', tpl_id=t.id) }}">查看</a>
                    <form method="POST" action="{{ url_for('admin_template_delete', tpl_id=t.id) }}" style="display: inline-block; margin-left: 0.25rem;" onsubmit="return confirm('确定要删除模板「{{ t.name }}」吗？此操作将同时删除该模板的所有维度，且无法恢复。');">
                        <button type="submit" class="btn btn-sm btn-danger">删除</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <p>暂无评分模板</p>
        <a href="{{ url_for('admin_templates_create') }}" class="btn btn-primary">创建第一个模板</a>
    </div>
    {% endif %}
</div>
{% endblock %}
